(()=>{"use strict";function e(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const t=function(){function t(e){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.FOCUSABLES_SELECTOR="a[href]:not(.invisible-redundant-link), button, input, textarea, select, details, [tabindex]:not(.invisible-redundant-link)",this.musetteEl=e,this.musetteWrapper=this.createWrapper(),this.mouseIsBeingDragged=!1,this.pos={top:0,left:0,x:0,y:0},this.observer=new IntersectionObserver(this.handleIntersections.bind(this),{root:this.musetteEl,rootMargin:"0px",threshold:.9}),Array.from(this.musetteEl.children).forEach((function(e){s.observer.observe(e)})),this.mouseDownHandler=this.mouseDownHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.mouseUpHandler=this.mouseUpHandler.bind(this),this.musetteEl.addEventListener("mousedown",this.mouseDownHandler)}var s,o;return s=t,(o=[{key:"handleIntersections",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting?(t.showFocusables(e.target),e.target==t.musetteEl.firstElementChild&&t.musetteWrapper.classList.remove("musette-has-left-button"),e.target==t.musetteEl.lastElementChild&&t.musetteWrapper.classList.remove("musette-has-right-button")):(t.hideFocusables(e.target),e.target==t.musetteEl.firstElementChild&&t.musetteWrapper.classList.add("musette-has-left-button"),e.target==t.musetteEl.lastElementChild&&t.musetteWrapper.classList.add("musette-has-right-button"))}))}},{key:"mouseDownHandler",value:function(e){e.preventDefault(),this.pos={left:this.musetteEl.scrollLeft,x:e.clientX},this.musetteEl.addEventListener("mousemove",this.mouseMoveHandler),this.musetteEl.addEventListener("mouseup",this.mouseUpHandler),this.musetteEl.addEventListener("mouseleave",this.mouseUpHandler)}},{key:"mouseMoveHandler",value:function(e){this.mouseIsBeingDragged=!0;var t=e.clientX-this.pos.x;this.musetteEl.scrollLeft=this.pos.left-t}},{key:"mouseUpHandler",value:function(){var e=this;this.musetteEl.removeEventListener("mousemove",this.mouseMoveHandler),this.musetteEl.removeEventListener("mouseup",this.mouseUpHandler),this.musetteEl.removeEventListener("mouseleave",this.mouseUpHandler);var t=this.mouseIsBeingDragged?"addEventListener":"removeEventListener";this.musetteEl.querySelectorAll("a").forEach((function(s){s[t]("click",e.preventClick)})),this.mouseIsBeingDragged=!1}},{key:"preventClick",value:function(e){e.preventDefault(),e.stopImmediatePropagation()}},{key:"createWrapper",value:function(){var e=document.createElement("div");e.classList.add("musette-wrapper");var t=document.createElement("button");t.classList.add("musette-move-left"),t.ariaLabel="Previous items",t.addEventListener("click",this.handleButtonScrollLeft.bind(this));var s=document.createElement("button");return s.classList.add("musette-move-right"),s.ariaLabel="Next items",s.addEventListener("click",this.handleButtonScrollRight.bind(this)),this.musetteEl.parentNode.insertBefore(e,this.musetteEl),e.appendChild(this.musetteEl),e.appendChild(t),e.appendChild(s),e}},{key:"handleButtonScrollLeft",value:function(){this.musetteEl.scrollTo({left:this.musetteEl.scrollLeft-this.musetteEl.offsetWidth,behavior:"smooth"})}},{key:"handleButtonScrollRight",value:function(){this.musetteEl.scrollTo({left:this.musetteEl.scrollLeft+this.musetteEl.offsetWidth,behavior:"smooth"})}},{key:"hideFocusables",value:function(e){e.ariaHidden="true",e.querySelectorAll(this.FOCUSABLES_SELECTOR).forEach((function(e){e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex","-1")}))}},{key:"showFocusables",value:function(e){e.ariaHidden="false",e.querySelectorAll(this.FOCUSABLES_SELECTOR).forEach((function(e){e.removeAttribute("aria-hidden"),e.setAttribute("tabindex","0")}))}},{key:"resetObserver",value:function(){var e=this;this.observer.disconnect(),this.musetteWrapper.classList.remove("musette-has-left-button"),this.musetteWrapper.classList.remove("musette-has-right-button"),Array.from(this.musetteEl.children).forEach((function(t){e.observer.observe(t)}))}}])&&e(s.prototype,o),Object.defineProperty(s,"prototype",{writable:!1}),t}();function s(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}const o=function(){function e(t){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.grabNavEl=t,this.musetteWrapper=this.createWrapper(),this.mouseIsBeingDragged=!1,this.pos={top:0,left:0,x:0,y:0},this.observer=new IntersectionObserver(this.handleIntersections.bind(this),{root:this.grabNavEl,rootMargin:"0px",threshold:.9}),Array.from(this.grabNavEl.children).forEach((function(e){s.observer.observe(e)})),this.mouseDownHandler=this.mouseDownHandler.bind(this),this.mouseMoveHandler=this.mouseMoveHandler.bind(this),this.mouseUpHandler=this.mouseUpHandler.bind(this),this.grabNavEl.addEventListener("mousedown",this.mouseDownHandler)}var t,o;return t=e,(o=[{key:"handleIntersections",value:function(e){var t=this;e.forEach((function(e){e.isIntersecting?(e.target==t.grabNavEl.firstElementChild&&t.musetteWrapper.classList.remove("grab-nav--overflow-left"),e.target==t.grabNavEl.lastElementChild&&t.musetteWrapper.classList.remove("grab-nav--overflow-right")):(e.target==t.grabNavEl.firstElementChild&&t.musetteWrapper.classList.add("grab-nav--overflow-left"),e.target==t.grabNavEl.lastElementChild&&t.musetteWrapper.classList.add("grab-nav--overflow-right"))}))}},{key:"mouseDownHandler",value:function(e){e.preventDefault(),this.pos={left:this.grabNavEl.scrollLeft,x:e.clientX},this.grabNavEl.addEventListener("mousemove",this.mouseMoveHandler),this.grabNavEl.addEventListener("mouseup",this.mouseUpHandler),this.grabNavEl.addEventListener("mouseleave",this.mouseUpHandler)}},{key:"mouseMoveHandler",value:function(e){this.mouseIsBeingDragged=!0;var t=e.clientX-this.pos.x;this.grabNavEl.scrollLeft=this.pos.left-t}},{key:"mouseUpHandler",value:function(){var e=this;this.grabNavEl.removeEventListener("mousemove",this.mouseMoveHandler),this.grabNavEl.removeEventListener("mouseup",this.mouseUpHandler),this.grabNavEl.removeEventListener("mouseleave",this.mouseUpHandler);var t=this.mouseIsBeingDragged?"addEventListener":"removeEventListener";this.grabNavEl.querySelectorAll("a").forEach((function(s){s[t]("click",e.preventClick)})),this.mouseIsBeingDragged=!1}},{key:"preventClick",value:function(e){e.preventDefault(),e.stopImmediatePropagation()}},{key:"createWrapper",value:function(){var e=document.createElement("div");return e.classList.add("grab-nav-wrapper"),this.grabNavEl.parentNode.insertBefore(e,this.grabNavEl),e.appendChild(this.grabNavEl),e}}])&&s(t.prototype,o),Object.defineProperty(t,"prototype",{writable:!1}),e}();function r(e,t){try{for(var s=arguments.length,o=new Array(s>2?s-2:0),r=2;r<s;r++)o[r-2]=arguments[r];e.apply(void 0,o)}catch(e){console.error("A Turtles Gazing at Clouds error occurred in ".concat(t,": "),e.message)}}r((function(){var e=document.querySelector(".js-artwork__intro__desc--readmore"),t=document.querySelector(".js-artwork__intro__desc--text"),s=document.querySelector(".js-artwork__intro__desc"),o=document.querySelector(".the-artwork"),r=document.querySelector(".artwork-audio"),n=document.querySelector(".js-artwork-audio-cta"),a=document.querySelector(".js-artwork__sharetool--copy-link"),i=document.querySelector(".artwork__sharetools"),l=0,c=function(){if((window.innerWidth||document.documentElement.clientWidth)>=1023)return!0},d=function(){c()&&o.classList.add("the-artwork--sticky")};e&&e.addEventListener("click",(function(){0==l&&(l=s.getAttribute("style")),s.classList.contains("artwork__intro__desc--expanded")?(s.addEventListener("transitionend",(function(){t.innerHTML="View more"}),{once:!0}),s.classList.add("artwork__intro__desc--cropped"),s.classList.remove("artwork__intro__desc--expanded"),s.setAttribute("style",l),window.scrollTo({behavior:"smooth",top:s.getBoundingClientRect().top-document.body.getBoundingClientRect().top-80}),c()&&o.classList.remove("the-artwork--sticky")):(s.addEventListener("transitionend",(function(){t.innerHTML="View less"}),{once:!0}),s.classList.remove("artwork__intro__desc--cropped"),s.classList.add("artwork__intro__desc--expanded"),s.setAttribute("style","max-height:100%"),d())}),!1),n&&n.addEventListener("click",(function(){r.classList.add("artwork-audio--opened"),d()}),!1),a&&a.addEventListener("click",(function(){i.classList.add("link-copied");var e=document.querySelector(".js-copy-link__to-copy"),t=document.createRange();t.selectNode(e),window.getSelection().addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges();var s=document.createRange();s.selectNode(e),window.getSelection().addRange(s),document.execCommand("copy"),window.getSelection().removeAllRanges(),setTimeout((function(){i.classList.remove("link-copied")}),3e3)}),!1)}),"artworkInteractions"),r((function(){var e,s=document.querySelectorAll(".js-facet-filter"),o=document.querySelector(".js-facet-viewer"),r=document.querySelector(".js-curated-related-artworks"),n=document.querySelector(".js-all-related-filter");if(o){var a=new t(o);document.addEventListener("DOMContentLoaded",(function(e){var t;t=function(e){var t=document.querySelector('meta[property="og:url"]').content.split("/").pop(),s=document.querySelector(".js-artwork__title--text").textContent;window.dataLayer.push({event:"object_click",object_type:"collection_items",object_id:t,object_title:s,object_list:"Related Artworks"})},o&&o.addEventListener("click",t),r&&r.addEventListener("click",t)}));var i=function(){n.classList.remove("active-facet"),s.forEach((function(e){e.classList.remove("active-facet")}))},l=function(){o.scrollTo(0,0),o.innerHTML='<div class="facets-loading"></div>'},c=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status&&e.responseText.length>0&&d(e.responseText)},d=function(e){o.classList.remove("requesting-api");var t=JSON.parse(e),s=[];t.results.forEach((function(e){var t=e.title,o=e.url,r=e.image,n=e.artist,a="",i=e.date,l="";""!=n&&(a='<div class="related-artwork-artist">'+n+"</div>"),i&&(l='<div class="related-artwork-date">'+i+"</div>");var c='<div class="related-artwork"><figure class="related-artwork-image__wrapper"><a class="related-artwork-image__link gtm__relatedartwork--new" href="'.concat(o,'" tabindex="-1"><img src="').concat(r,'" alt="').concat(t,'" class="related-artwork-image" loading="lazy"></a></figure><h3 class="related-artwork-title"><a href="').concat(o,'" class="gtm__relatedartwork--new">').concat(t,'</a></h3><div class="related-artwork-meta">').concat(a).concat(l,"</div></div>");s.push(c)})),o.scrollTo(0,0),o.innerHTML=s.join(""),a.resetObserver()};s.forEach((function(t){var s=t.href.split("?");t.setAttribute("data-api","https://www.metmuseum.org/mothra/collectionlisting/search?"+s[1]+"&showOnly=withImage"),t.addEventListener("click",(function(s){s.preventDefault(),function(t,s){i(),t.classList.add("active-facet"),function(t){o.classList.add("requesting-api"),r.parentNode.style.display="none",l(),(e=new XMLHttpRequest).onreadystatechange=c,e.open("GET",t),e.send()}(s)}(t,t.getAttribute("data-api"))}),!1)})),n&&n.addEventListener("click",(function(e){e.preventDefault(),o.innerHTML="",r.parentNode.style.display="block",i(),n.classList.add("active-facet"),a.resetObserver()}),!1)}}),"facetViewer"),r((function(){var e,t=document.querySelector(".js-artwork-section"),s=t.querySelector(".js-artwork__image"),o=t.querySelector(".js-artwork__caption"),r=t.querySelector(".js-artwork__rights-notice--container"),n=t.querySelector(".js-additional-images-carousel-init");n&&(e=n.querySelectorAll(".js-image-slide"));var a=t.querySelector(".js-three-d-image-thumbnail"),i=t.querySelector(".js-the-artwork__meta"),l=function(e){e.classList.contains("loading-image")||(e.classList.add("loading-image"),c(e,e.querySelector("img")))},c=function(e,t){var s=t.dataset.largeimage,o=t.dataset.caption.toString().trim(),r=t.dataset.openaccess,n=t.dataset.superjumboimage;d(e,r,n),u(s,o,r,e)},d=function(e,s,o){Array.from(document.querySelectorAll(".js-image-slide")).forEach((function(e){e.classList.remove("is-active")})),e.classList.add("is-active"),a&&a.classList.remove("is-active"),"True"===s&&(t.querySelector(".artwork__interaction--download").querySelector("a").href=o)},u=function(e,n,a,l){t.classList.remove("artwork--image-has-loaded"),t.classList.add("artwork--image-is-loading"),i.classList.remove("fade-opacity-to-one"),i.classList.add("opacity-zero"),r.classList.remove("fade-opacity-to-one"),r.classList.add("opacity-zero"),s.classList.remove("opacity-one"),s.classList.add("opacity-zero"),s.addEventListener("transitionend",(function(){s.classList.contains("opacity-zero")?(t.classList.remove("now-showing-3d"),t.classList.add("now-showing-image"),o.classList.remove("artwork__caption--has-caption"),o.querySelector("p").innerHTML="",t.classList.remove("artwork--is-openaccess"),t.classList.remove("artwork--not-openaccess"),t.classList.remove("artwork--disallow-fullscreen"),t.classList.remove("artwork--allow-fullscreen"),t.classList.remove("artwork--no-rights-notice"),t.classList.remove("artwork--display-rights-notice"),s.src=e,s.onload=function(){m(n,a,l)}):(i.classList.add("fade-opacity-to-one"),i.classList.remove("opacity-zero"),r.classList.add("fade-opacity-to-one"),r.classList.remove("opacity-zero"))}))},m=function(e,s,r){""!=e&&(o.classList.add("artwork__caption--has-caption"),o.querySelector("p").innerHTML=e),"True"==s?(t.classList.add("artwork--is-openaccess"),t.classList.add("artwork--allow-fullscreen")):(t.classList.add("artwork--not-openaccess"),t.classList.add("artwork--disallow-fullscreen"),t.classList.add("artwork--display-rights-notice")),h(),r.classList.remove("loading-image")},h=function(){t.classList.remove("artwork--image-is-loading"),t.classList.add("artwork--image-has-loaded"),s.classList.remove("opacity-zero"),s.classList.add("opacity-one")};s&&n&&e.forEach((function(e){e.addEventListener("click",(function(t){l(e)})),e.addEventListener("keypress",(function(t){l(e)}))}))}),"slideshow"),r((function(){document.querySelectorAll(".js-slide-toggler").forEach((function(e){e.onclick=function(t){t.preventDefault();var s=this.parentNode.querySelector(".js-slide-togglee");if(s.classList.contains("slid-open"))s.style.height="0px",s.addEventListener("transitionend",(function(){s.classList.remove("slid-open"),s.classList.add("slid-shut"),e.classList.remove("slid-open"),e.querySelector(".slide-toggler-text").innerHTML="See more"}),{once:!0});else{s.classList.add("slid-open"),s.classList.remove("slid-shut"),e.classList.add("slid-open"),e.querySelector(".slide-toggler-text").innerHTML="See less",s.style.height="auto";var o=s.clientHeight+"px";s.style.height="0px",setTimeout((function(){s.style.height=o}),0)}}}))}),"theSlidingToggler"),r((function(){var e,t,s,o,r=document.querySelector(".js-artwork-section"),n=r.querySelector(".js-three-d-image-thumbnail"),a=r.querySelector(".js-the-artwork__figure"),i=document.getElementsByTagName("html")[0],l=function(e){r.classList.remove("three-d-model-is-loading"),r.classList.add("three-d-model-has-loaded"),r.classList.remove("artwork--image-has-loaded"),r.querySelector(".js-three-d-model-loader").remove()};n&&n.addEventListener("click",(function(){r.classList.contains("now-showing-image")&&(Array.from(document.querySelectorAll(".js-thumbnail-slide")).forEach((function(e){e.classList.remove("is-active")})),n.classList.add("is-active"),r.classList.remove("artwork--is-openaccess"),r.classList.remove("artwork--disallow-fullscreen"),r.classList.remove("artwork--display-rights-notice"),r.classList.add("artwork--not-openaccess"),r.classList.add("artwork--allow-fullscreen"),r.classList.add("artwork--no-rights-notice"),r.classList.remove("now-showing-image"),r.classList.add("now-showing-3d"),r.classList.contains("three-d-model-has-loaded")||(function(){if(!i.classList.contains("modelviewer-loaded")){var e=document.createElement("script");e.type="module",e.src="https://unpkg.com/@google/model-viewer@1.10.1/dist/model-viewer.min.js",document.body.appendChild(e),i.classList.add("modelviewer-loaded")}}(),e=n.dataset.modelurl,t=n.dataset.iosurl,(s=document.createElement("model-viewer")).setAttribute("class","model-viewer slideshow-model-viewer"),s.setAttribute("src",e),s.setAttribute("ios-src",t),s.setAttribute("ar",""),s.setAttribute("ar-modes","webxr scene-viewer quick-look"),s.setAttribute("camera-controls",""),s.setAttribute("environment-image","neutral"),s.setAttribute("exposure","1"),s.addEventListener("load",l),a.insertBefore(s,a.firstChild),r.classList.add("three-d-model-is-loading"),(o=document.createElement("div")).setAttribute("class","js-three-d-model-loader three-d-model-loader"),a.insertBefore(o,a.firstChild)))}))}),"threeDViewer"),r((function(){var e=document.querySelectorAll(".js-tool-tip-hover-trigger"),t=document.querySelectorAll(".js-tool-tip-click-trigger"),s=document.querySelectorAll(".js-tool-tip-hover-open"),o=document.querySelectorAll(".js-tool-tip-content");e.forEach((function(e){var t=e.querySelector(".js-tool-tip-content");e.onmouseenter=function(){t.classList.add("show-tooltip")},window.addEventListener("click",(function(e){t.classList.remove("show-tooltip")}))})),t.forEach((function(e){var t=e.nextElementSibling,s=document.querySelector(".artwork__sharetool--copy-link");document.addEventListener("click",(function(o){var r=e.contains(o.target),n=s.contains(o.target);r||n?r&&(t.classList.contains("show-tooltip")?t.classList.remove("show-tooltip"):t.classList.add("show-tooltip")):t.classList.remove("show-tooltip")}))})),s.forEach((function(e){var t,s=e.nextElementSibling,r=function(){s.classList.remove("show-tooltip")},n=function(){window.setTimeout((function(){t&&r()}),800)};e.addEventListener("mouseenter",(function(){o.forEach((function(e){e.classList.remove("show-tooltip")})),s.classList.contains("show-tooltip")?(t=!0,n()):(t=!1,s.classList.add("show-tooltip"))})),e.addEventListener("mouseleave",(function(){t=!0,n()})),s.addEventListener("mouseenter",(function(){t=!1})),s.addEventListener("mouseleave",(function(){t=!0,n()})),document.addEventListener("click",(function(e){document.querySelector(".artwork__sharetool--copy-link").contains(e.target)||r()}))}))}),"toolTipping"),r((function(){var e=document.querySelector("#translations__select");e&&e.addEventListener("change",(function(){window.location.href=e.value}),!1)}),"translationNav"),r((function(){var e=document.querySelector(".js-artwork-details-cta"),t=document.querySelector(".js-artwork-details");e&&e.addEventListener("click",(function(e){e.preventDefault(),window.scrollTo({behavior:"smooth",top:t.getBoundingClientRect().top-document.body.getBoundingClientRect().top-30})}))}),"smoothScroll"),r((function(){document.querySelectorAll(".js-showtabs").forEach((function(e){var t=e.querySelector(".js-showtabs-tabs"),s=e.querySelectorAll(".js-showtabs-link"),o=e.querySelector(".js-showtabs-tabpanel");s.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault(),r(e,!0)})),e.addEventListener("keydown",(function(e){var o=t.querySelector("[aria-selected]"),n=Array.prototype.indexOf.call(s,o),a=-1;37==e.which?a=n-1:39==e.which?a=n+1:38==e.which?a=n-1:40==e.which&&(a=n+1),a>=0&&r(s[a],!0)}))}));var r=function(e,t){var s=new URL(e.href).hash.substring(1),o=document.getElementById(s);n(e,t),a(),i(o)},n=function(e,t){s.forEach((function(e){e.parentNode.classList.remove("selected"),e.removeAttribute("aria-selected"),e.setAttribute("tabindex","-1")})),e.parentNode.classList.add("selected"),e.setAttribute("aria-selected","true"),e.removeAttribute("tabindex"),1==t&&e.focus()},a=function(){e.querySelectorAll(".js-showtabs-tabpanel").forEach((function(e){e.classList.remove("selected"),e.setAttribute("hidden","")}))},i=function(e){e.classList.add("selected"),e.removeAttribute("hidden"),l(e)},l=function(e){var t=e.querySelector(".js-show-more__body"),s=t.clientHeight,o=t.scrollHeight;o-s<200?(e.classList.remove("show-more__panel--cropped"),e.classList.add("show-more__panel--borderline")):s<o?(e.classList.remove("show-more__panel--borderline"),e.classList.add("show-more__panel--cropped")):(e.classList.remove("show-more__panel--borderline"),e.classList.remove("show-more__panel--cropped"))};window.addEventListener("resize",(function(){e.querySelectorAll(".js-showtabs-tabpanel").forEach((function(e){e.classList.contains("selected")&&l(e)}))})),l(o)}))}),"showTabs"),r((function(){document.querySelectorAll(".js-show-more").forEach((function(e){var t="View more";e.querySelectorAll(".js-show-more__button").forEach((function(e){e.querySelector(".js-show-more__button-text").innerHTML=t,e.addEventListener("click",(function(t){t.preventDefault(),s(e)}))}));var s=function(e){var t=e.closest(".js-show-more");t.classList.contains("show-more__panel--cropped")?o(t,e):r(t,e)},o=function(e,t){e.addEventListener("transitionend",(function(){t.querySelector(".js-show-more__button-text").innerHTML="View less"}),{once:!0}),e.classList.remove("show-more__panel--cropped"),e.classList.add("show-more__panel--expanded")},r=function(s,o){window.scrollTo({behavior:"smooth",top:e.getBoundingClientRect().top-document.body.getBoundingClientRect().top-80}),s.addEventListener("transitionend",(function(){o.querySelector(".js-show-more__button-text").innerHTML=t}),{once:!0}),s.classList.add("show-more__panel--cropped"),s.classList.remove("show-more__panel--expanded")}}))}),"showMore"),document.querySelectorAll(".js-grab-nav").forEach((function(e){return new o(e)})),document.querySelectorAll(".js-la-musette").forEach((function(e){return new t(e)}))})();