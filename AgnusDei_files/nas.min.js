!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){var n=n||{};const i=document.querySelector(".js-global-footer__newsletter-signup");n.init=function(){this.success=!1,this.message=null,this.email=null,this.pageInfo=null,this.pageId=null,this.submitted=!1,this.disableSubmit=!0,this.isValid=!1,this.form=document.querySelector(".js-global-footer__newsletter-signup"),this.formWrapper=document.querySelector(".js-global-footer__newsletter-wrapper"),this.successMessage=this.form.querySelector(".js-global-footer__newsletter-confirm"),this.errorMessage=this.form.querySelector(".js-form__validation__submit-error"),this.inputField=this.form.querySelector(".js-global-footer__newsletter-input"),this.submitButton=this.form.querySelector(".js-global-footer__newsletter-submit"),this.footerLinks=document.querySelectorAll(".global-footer__nav-link-js"),this.submit=e=>{let t;this.showErrorBanner(!1),window.searchConfigs&&window.searchConfigs.newsletter&&(t=window.searchConfigs.newsletter.url),window.newsletterConfig&&window.newsletterConfig.searchParams.currentPageId&&(this.pageId=window.newsletterConfig.searchParams.currentPageId),this.pageInfo="home"===e?"web_home":"web_footer";const n=JSON.stringify({emailAddress:this.email,pageInfo:this.pageInfo,currentPageId:this.pageId});fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:n}).then(e=>e.json()).then(e=>{e.success?(this.setSuccessState(e.message),window.dataLayer=window.dataLayer instanceof Array?window.dataLayer:[],window.dataLayer.push({Category:"Email",Action:"Sign up",event:"FooterNewsletterFormSubmitted"})):this.showErrorBanner(!0,e.message)}).catch(e=>{this.showErrorBanner(!0,e.message)})},this.footerLinks.forEach(e=>{e.addEventListener("click",e=>{window.dataLayer.push({event:"menu_click",menu_category_1:e.target.innerText,menu_item_location:"footer"})})}),this.submitButton.addEventListener("click",e=>{e.preventDefault(),this.isValid&&this.submit("")}),this.setSuccessState=e=>{this.submitted=!0,this.successMessage.classList.add("is-visible"),this.successMessage.innerHTML=e,this.formWrapper.classList.add("is-hidden")},this.showErrorBanner=(e,t="")=>{e?(this.errorMessage.classList.add("is-visible"),this.errorMessage.innerHTML=t):this.errorMessage.classList.remove("is-visible")},this.inputField.addEventListener("blur",()=>{this.isValid=this.inputField.checkValidity(),this.isValid?this.inputField.classList.remove("is-invalid"):this.inputField.classList.add("is-invalid"),this.showErrorBanner(!this.isValid,"Please enter a valid email")}),this.inputField.addEventListener("keyup",e=>{this.email=e.target.value}),this.inputField.addEventListener("focus",()=>{this.inputField.classList.remove("is-invalid")})},i&&n.init()},function(e,t,n){"use strict";n.r(t);const i=document.querySelector(".content-wrapper--masthead"),s=i.querySelectorAll(".js-tier1"),r=i.querySelector("form"),a=i.querySelector(".js-hamburger"),o=i.querySelector(".js-masthead__to-content"),c=i.querySelectorAll(".js-nav-main__link"),l=document.querySelector(".main-wrapper")||document.querySelector(".main-content")||document.querySelector("#main")||document.querySelector("main"),u=()=>{i.querySelectorAll(".is-open").forEach(e=>e.classList.remove("is-open"))},d=()=>{document.querySelector(".js-bottom-bar.is-open")?a.classList.remove("show-open"):a.classList.add("show-open")},m=(e,t,n=null)=>{const s=i.querySelector(e);i.querySelectorAll(t).forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),s.classList.contains("is-open")?(u(),document.removeEventListener("click",p)):(u(),s.classList.add("is-open"),n&&document.querySelector(n).focus(),document.addEventListener("click",p)),d()})})},h=e=>{const t=e.target.closest(".js-nav-main__primary-item"),n=i.querySelector(".js-nav-main__primary-item.is-active");t.classList.contains("is-active")?t.classList.remove("is-active"):(n&&n.classList.remove("is-active"),t.classList.add("is-active"),e.target.focus())},p=e=>{if(!i.contains(e.target)){const e=i.querySelector(".is-open");e&&e.classList.remove("is-open"),document.removeEventListener("click",p),d()}},v=e=>{e.preventDefault();const t=r.getAttribute("action"),n=r.querySelector(".js-quickSearch").value;window.location.href=`${t}?q=${encodeURI(n)}`},f=e=>{e.preventDefault(),l.setAttribute("tabindex","-1"),l.focus()},g=()=>{m(".js-search",".js-search-trigger",".js-quickSearch"),m(".js-bottom-bar",".js-hamburger"),s.forEach(e=>e.addEventListener("click",h)),r.addEventListener("submit",v),c.forEach(e=>{e.addEventListener("click",()=>{var t=e.closest(".js-subnav").previousElementSibling.innerText,n=e.innerText;window.dataLayer.push({event:"menu_click",menu_category_1:t,menu_category_2:n,menu_item_location:"header"})})}),document.addEventListener("DOMContentLoaded",e=>{var t;t=window.location.pathname.split("/")[1],window.dataLayer.push({event:"general",current_environment:"metmuseum.org",content_group:t})}),l?o.addEventListener("click",f):o.remove()};var b=function(){s.forEach(e=>{var t=e.dataset.navId;window.location.pathname.split("/")[1]===t&&e.classList.add("is-section")}),g()};const y=document.querySelector(".js-search");let w="",_=[];const S=(e,t)=>{const n=t.split(" "),i=(s="buttonText",e.reduce((function(e,t){var n="function"==typeof s?s(t):t[s];return e.hasOwnProperty(n)||(e[n]=[]),e[n].push(t),e}),{}));var s;const r=Object.keys(i).map(e=>`<div class="nav-main__typeahead-result">\n\t\t\t${"null"!==e?`<span class="nav-main__typeahead-category">${e}</span>`:""}\n\t\t\t${i[e].map(e=>{const t=L(e,n);return`<a href="${t.url}" class="nav-main__typeahead-link">\n\t\t\t\t\t${t.bestBet?`<span class="nav-main__typeahead-suggested"> Suggested result for "<span class="nav-main__typeahead-query">${w}</span>"</span>`:""}\n\t\t\t\t\t\t<span class="nav-main__typeahead-title-wrapper">\n\t\t\t\t\t\t\t<span class="nav-main__typeahead-title">${t.title}</span>\n\t\t\t\t\t\t\t${null!==t.artist&&""!==t.artist?`<span class="nav-main__typeahead-subtitle">by ${t.artist} </span></span>`:""}\n\t\t\t\t\t</span>\n\t\t\t\t</a>`}).join("\n")}\n\t\t</div>`).join("\n");y.querySelector(".js-nav-main__typeahead").innerHTML=r},L=(e,t)=>(e.title=q(e.title,t),e.artist&&(e.artist=q(e.artist,t)),e),q=(e,t)=>e.split(" ").map(e=>{let n=e.toLowerCase(),i=e;return t.some((function(t){if(t.toLowerCase()===n)return i=`<span class='highlight-text'>${e}</span>`,!0})),i}).join(" "),E=e=>{y.querySelector(".nav-main__typeahead-spinner").innerHTML=e?'<div class="nav-main__spinner"></div>':""},j=((e,t)=>{let n=null;return(...i)=>{window.clearTimeout(n),n=window.setTimeout(()=>{e.apply(null,i)},t)}})(()=>{if(w=y.querySelector(".js-quickSearch").value,w.length>=3){E(!0);fetch("../api/search/QuickSearch?q="+w).then(e=>{if(E(!1),!e.ok)throw new Error("Unable to find matching results");return e.json()}).then(e=>{_=e.results,_&&_.length>0&&S(_,w),E(!1)}).catch(e=>{console.log(e),_=[],S(_,w)})}else _=[],S(_,w)},300);var k=function(){window.matchMedia("(min-width: 1024px)").matches&&y.querySelector(".js-quickSearch").addEventListener("keyup",j)};const x=document.querySelector(".js-ribbon-banner");let T=!1;const M=()=>{T?x.classList.remove("ribbon__open"):x.classList.add("ribbon__open")},C=e=>{e.preventDefault(),T=!0,(()=>{const e=x.getAttribute("data-expiration"),t=new Date;t.setDate(t.getDate()+parseInt(e)),document.cookie=`metNotificationBanner=visited; expires=${t.toUTCString()}; path=/`})(),x.classList.remove("ribbon__open")};function O(){if(x){const e="True"===x.getAttribute("data-enabled");!(document.cookie.split("; ").indexOf("metNotificationBanner=visited")>-1)&&e&&M(),document.querySelector(".js-ribbon-close").addEventListener("click",e=>{C(e)})}(function(){var e=window.navigator.userAgent;if(e.indexOf("MSIE ")>0)return!0;if(e.indexOf("Trident/")>0)return!0;var t=document.createElement("div");return t.innerHTML="\x3c!--[if IE]><i></i><![endif]--\x3e",1==t.getElementsByTagName("i").length})()&&(document.querySelector("#mma-ribbon-banner .ribbon__text").innerHTML("Our website has detected that you are using an outdated browser that will prevent you from accessing certain features. Please use another browser (e.g. Edge, Chrome, or Firefox) to view our website. "),M())}var I=function(){document.addEventListener("DOMContentLoaded",O())};var $=function(){const e=document.querySelector("#lightbox-template"),t="True"===e.getAttribute("data-enabled"),n=(e,t)=>{let n=new Date;n.setDate(n.getDate()+parseInt(i)),document.cookie=`${e}-lightbox=visited; expires=${n.toUTCString()}; path=/`,t&&(document.cookie=`${e}-ribbonbanner=visited; expires=${n.toUTCString()}; path=/`)};if(t&&!(document.cookie.indexOf("lightbox=visited")>-1)){const t=document.importNode(e.content,!0);document.querySelector("body").appendChild(t),t.dispatchEvent(new CustomEvent("lightbox-visible"));const s=document.querySelector("#mma-lightbox"),r=s.querySelector(".lightbox-close");r.focus();const a=s.dataset.lightboxId,o="True"===s.dataset.home;var i=s.dataset.expiration;const c=e=>{e.preventDefault(),s.classList.add("is-hidden"),n(a,o),s.classList.remove("lightbox-open")};r.addEventListener("click",c),s.addEventListener("click",c),s.querySelector(".lightbox-container").addEventListener("click",e=>e.stopPropagation()),s.querySelectorAll("a, area").forEach(e=>{e.addEventListener("click",()=>n(a,o))}),document.addEventListener("keydown",e=>{27==e.keyCode&&c(e)})}};n(0);b(),$(),I(),k()}]);